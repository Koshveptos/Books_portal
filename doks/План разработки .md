# Технический план разработки «Книжный портал»

## 1. Базовая архитектура системы

### 1.1. Технологический стек
- Backend Framework: FastAPI
- База данных: PostgreSQL
- ORM: SQLAlchemy + Alembic
- Поисковый движок: Elasticsearch
- Кэширование: Redis
- Очереди задач: Taskiq
- Файловое хранилище: S3
- Рекомендательная система - рекомендаций по "похожим книгам"/ **контентно-базированный подход** (content-based Filtering)

### 2.1 план разработки для первого этапа (по документации до 29 марта)(стоят по приоритету)
> хоть и стоит до 29, я написал многое как "провести анализ" поэтому полностью готовый функционал конечно не нужен к 29, просто прототипы
- проектирование базы данных
- разработка прототипа бекэнд части приложения
- проведение анализа и сравнения с аналогами, документирование 
- разработка рекомендательной системы
- разработка методов фильтрации и полнотекстового поиска
- телеграм бот
#### предполагаю одновременно выполнение некоторых задач 
#### 2.2.1 Разработка рекомендательной системы (до 2х недель не учитывая сопутсвующие задачи) 
#### https://habr.com/ru/companies/otus/articles/764222/
#### https://habr.com/ru/companies/magnus-tech/articles/753706/
- выбрать и нормировать входные данные для обучения модели (просмотры, лайки, избранное и тд) 
#### в зависимости от кол-ва параметров зависит модель, если делать NLP то хватит просто данных о 
#### взаимодейсвиях между пользователями и книгами и самая простая модель (пример библиотека Surprise)
#### для большего колличества параметров потребуется библиотека LightFM и модель warp или bpr например данные о взаимодействии(просмотр, лайк, избранное, скачанное) + данные по книгам жанры, год издания, автор и тд данные о схожих людях  - требуется определить категорию человека , возраст, пол и тд, для этого требуется указать больше личных данные при регистрации (спорно, не все это лоюбят)
- построить датасеты для обучения и тестирования и выбрать модель обучения
- разработка модели и тестирование на данных (в зависимости от результатов выбор другой модели)
- внедрение в бек(при его наличии на данном этапе)



### 2.2.2 Разработка методов фильтрации и полнотекстового поиска
#### https://habr.com/ru/companies/vk/articles/258205/
- настроить систему поиска по названиям, ключевым словам
- настроить систему фильстрации по жанрам, авторам и тд
- Индексация книг для полнотекстового поиска
- Поиск по названию, автору, описанию
- Автодополнение при поиске
- Автоматическое определение жанров
- Извлечение ключевых слов
#### вроде легко, никаких супер дополнений не надо, просто массив давнных, дергаем нужное и фильтруем по полям 


### 2.2.3 проведение анализа и сравнения с аналогами
- произвести глубокий анализ темы, посмотрел на аналогичные веб-приложения и выделить + и -, которые надо добавить (или избежать соответсвенно)。

### 2.2.4 проектирование базы данных
- спроектировать базу данных
#### +- такая же как в начальной версии была, но добавить или убрать что то исходя из анализа из пункта 2.2.3


### 2.2.5 разработка прототипа бэка
 - реализовать NLP функционал первого этапа
#### на первом этапе NLP считать бэк имеющим функции базовых действий с книгами (загрузка, скачивание, получение книги или массива книг)
#### функции просмотра определеной книги или каталога книг
#### Доп если будет время - сразу сделать разделение ролей и сделать вход и регистрацию
### 2.2.5.1  API Эндпоинты  (дописать)
#### Аутентификация и пользователи
- POST /api/auth/register
- POST /api/auth/login
- GET /api/users/me
- PUT /api/users/me
#### Управление книгами
- GET /api/books - список книг (после интеграции с реками список книг + фильтр)
- GET /api/books/{id} - детальная информация о книге
- POST /api/books - добавление новой книги
- PUT /api/books/{id} - обновление информации
- DELETE /api/books/{id} - удаление книги 
#### рекомендации
- GET /api/recommendations/user/{user_id} (скорее всего нет, реки просто будут вниху в меню когда пользователь смотрит одну книгу)
###### ДОП функционал к первому этапу который не стоит пока что в приоритете
- Taskiq для асинхронного обновления рекомендаций
- Redis для кэширования рекомендаций
- как дополнение можно сделать логирование ошибок и тд

## 2.2.6 Telegram бот
### 2.2.6.1 Функционал
- Авторизация через основной сервис
- Поиск книг
- Доступ к личной библиотеке
- Получение рекомендаций (50\50)
### 2.2.6.2 Команды бота
- /start - начало работы
- /search - поиск книг
- /mylibrary - личная библиотека
- /recommendations - получить рекомендации (50\50)
##







## 3. общий порядок разработки (так посоветол гпт)
### 6.1. Этап 1: Основной бэкенд (
1. Настройка проекта и базовой структуры
2. Реализация моделей данных и миграций
3. Разработка API аутентификации
4. Реализация CRUD операций для книг
5. Интеграция с S3 для хранения файлов
6. Настройка Elasticsearch для поиска

### 6.2. Этап 2: Рекомендательная система (3-4 недели)
1. Разработка базовых алгоритмов
2. Интеграция с Taskiq для фоновых задач
3. API для получения рекомендаций
4. Кэширование результатов в Redis

### 6.3. Этап 3: Классификация (2-3 недели)
1. Разработка моделей классификации
2. API для анализа книг
3. Интеграция с основным бэкендом

### 6.4. Этап 4: Telegram бот (2-3 недели)
1. Базовая структура бота
2. Интеграция с основным API
3. Реализация команд и обработчиков
4. Тестирование и оптимизация

