# Рекомендательная система Books Portal

В этом документе описана рекомендательная система Books Portal, ее архитектура, алгоритмы и API.

## Обзор системы

Рекомендательная система предоставляет персонализированные рекомендации книг на основе предпочтений пользователя и поведения других пользователей. Система использует гибридный подход, сочетающий контентную и коллаборативную фильтрацию.

### Типы рекомендаций

1. **Гибридные** (`hybrid`) - комбинация контентных и коллаборативных рекомендаций
2. **Коллаборативные** (`collaborative`) - на основе оценок похожих пользователей
3. **Контентные** (`content`) - на основе интересов пользователя (авторы, категории, теги)
4. **По авторам** (`author`) - книги от любимых авторов
5. **По категориям** (`category`) - книги из любимых категорий
6. **По тегам** (`tag`) - книги с любимыми тегами

## API рекомендательной системы

### Получение рекомендаций

```http
GET /recommendations/
```

Параметры запроса:
- `limit` - максимальное количество рекомендаций (1-100, по умолчанию 10)
- `min_rating` - минимальный рейтинг книг (1.0-5.0, по умолчанию 3.0)
- `min_year` - минимальный год издания (опционально)
- `max_year` - максимальный год издания (опционально)
- `min_ratings_count` - минимальное количество оценок (1-100, по умолчанию 5)
- `recommendation_type` - тип рекомендаций (hybrid, collaborative, content, author, category, tag)
- `use_cache` - использовать кэширование (true/false, по умолчанию true)

### Получение статистики рекомендаций

```http
GET /recommendations/stats
```

Возвращает статистику пользователя:
- Количество оцененных книг
- Средний рейтинг
- Любимые авторы
- Любимые категории
- Любимые теги
- Готовность системы к предоставлению рекомендаций

### Получение похожих пользователей

```http
GET /recommendations/similar-users
```

Параметры запроса:
- `limit` - максимальное количество похожих пользователей (1-50, по умолчанию 10)
- `min_common_ratings` - минимальное количество общих оценок (1-20, по умолчанию 3)

### Получение рекомендаций по авторам

```http
GET /recommendations/by-author
```

### Получение рекомендаций по категориям

```http
GET /recommendations/by-category
```

### Получение рекомендаций по тегам

```http
GET /recommendations/by-tag
```

## Алгоритмы рекомендаций

### Контентная фильтрация

Контентная фильтрация основана на анализе интересов пользователя:
1. Система определяет предпочтения пользователя (любимые авторы, категории, теги) на основе оценок, лайков и избранного
2. Для каждого предпочтения рассчитывается вес на основе количества взаимодействий и средней оценки
3. Система рекомендует книги, которые соответствуют предпочтениям пользователя, но не были оценены им

### Коллаборативная фильтрация

Коллаборативная фильтрация основана на схожести пользователей:
1. Система находит похожих пользователей на основе общих оценок
2. Для каждого похожего пользователя рассчитывается коэффициент корреляции оценок
3. Система рекомендует книги, которые были высоко оценены похожими пользователями, но не были оценены текущим пользователем

### Гибридная фильтрация

Гибридная фильтрация объединяет результаты контентной и коллаборативной фильтрации, присваивая каждому методу определенный вес. В текущей реализации контентная фильтрация имеет вес 0.4, а коллаборативная - 0.6.

## Выводы и дальнейшие улучшения

Разработанная рекомендательная система предоставляет персонализированные рекомендации книг на основе комплексного анализа предпочтений пользователя и поведения других пользователей. Система может быть улучшена следующими способами:

1. Использование более сложных алгоритмов коллаборативной фильтрации (например, матричная факторизация)
2. Учет временного контекста (например, сезонные предпочтения)
3. Добавление контекстной информации о книгах (аннотации, обложки) для более глубокого анализа
4. Внедрение механизмов разнообразия рекомендаций для избежания "пузыря фильтров"
5. Реализация A/B тестирования для оценки эффективности различных алгоритмов
